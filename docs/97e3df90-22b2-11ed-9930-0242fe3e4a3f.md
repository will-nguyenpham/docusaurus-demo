---
id: "97e3df90-22b2-11ed-9930-0242fe3e4a3f"
title: "Automation testing of shadow DOM elements with Katalon Studio"
slug: "create-tests/test-objects/web-test-objects/automation-testing-of-shadow-dom-elements-with-katalon-studio"
hide_title: true
---
import useBaseUrl from '@docusaurus/useBaseUrl';


# <a id="id" class="anchor_top_offset"/><a id="ariaid-title1" class="anchor_top_offset"/>Automation testing of shadow DOM elements with Katalon Studio

<div xmlns="http://www.w3.org/1999/xhtml" className="note important note_important"><span className="note__title">Important:</span> <ul className="ul"><li className="li">Chrome browser from version 53 onwards.</li></ul></div>
<p xmlns="http://www.w3.org/1999/xhtml" className="p">Shadow DOM allows DOM elements to contain child nodes and CSS, which helps web developers by better encapsulating their code. But this creates challenges for automation testing, because elements inside a shadow root technically do not exist in the main DOM.</p> 
<p xmlns="http://www.w3.org/1999/xhtml" className="p">This article shows you how to test shadow DOM elements in <span className="ph">Katalon Studio</span>.</p> 
<p xmlns="http://www.w3.org/1999/xhtml" className="p">In this demonstration, we use the demo site <a className="xref j-external-link" href="https://books-pwakit.appspot.com/explore?q=" target="_blank">Books</a>: <code className="ph codeph">https://books-pwakit.appspot.com/explore?q=</code>. All the elements in this demo website are under a shadow root. The first step is to identify shadow DOM objects, then verify them by successfully inputting: "hello World" into the website search bar.</p> 

## <a id="concept-2390" class="anchor_top_offset"/>Identify shadow DOM objects

<p xmlns="http://www.w3.org/1999/xhtml" className="p">In the demo website, navigate to the search bar. Right-click on the page and choose <span className="ph uicontrol">Inspect</span>. The Chrome Developer tool opens and highlights the selected element.</p> 
<div xmlns="http://www.w3.org/1999/xhtml" className="p">At this point, there are two shadow DOM elements that you need to identify in the Chrome Developer tool: <ul className="ul"><li className="li">The property of the parent object. The parent object is the shadow host. Shadow host is the regular DOM node that the shadow DOM is attached to. In this demo site, <code className="ph codeph">book-app</code> is the parent object. <img className="image" width={800} src={useBaseUrl("/caad67e0-750d-11ed-a602-0242cfbc79b5.png")} /></li><li className="li">The property of the child object. The child object is the shadow DOM elements we are inspecting. In this example, we look at the property of the search bar's elements. 
      <img className="image" width={800} src={useBaseUrl("/cbe105e0-750d-11ed-a602-0242cfbc79b5.png")} /><p className="p">You can learn more about object properties from the Mozilla developer documentation: <a className="xref j-external-link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects" target="_blank">Working with objects</a>.</p></li></ul></div>

## <a id="concept-6838" class="anchor_top_offset"/>Define object properties

<p xmlns="http://www.w3.org/1999/xhtml" className="p">After identifying the property of the parent object and the child object, return to  <span className="ph">Katalon Studio</span>  to define object properties.   <span className="ph">Katalon Studio</span> supports the following selection methods to create the object's properties: Attributes, XPath, CSS, Image.    In this example, we use the Attributes method.</p> 
<p xmlns="http://www.w3.org/1999/xhtml" className="p">To learn more about  selection method for object properties, see: <a className="xref" href="/docs/create-tests/test-objects/web-test-objects/selection-methods-for-web-tests-in-katalon-studio">Selection Methods for Web Tests in <span className="ph">Katalon Studio</span></a>.</p> 

### <a id="task-5882" class="anchor_top_offset"/>Create the parent object

<ol xmlns="http://www.w3.org/1999/xhtml" className="ol steps"><li className="li step stepexpand"><span className="ph cmd">In the <span className="ph uicontrol">Tests Explorer</span> panel, right-click on the&nbsp;<span className="ph uicontrol">Object Repository</span>&nbsp;folder, then select&nbsp;<span className="ph uicontrol">New</span> &gt; <span className="ph uicontrol">Test Object</span>.</span><div className="itemgroup info"><img className="image" width={500} src={useBaseUrl("/4569c860-9b67-11ec-ad3c-024208599ecc.png")} alt="Create a new test object" /></div><div className="itemgroup info">Alternatively, you can also go to <span className="ph uicontrol">File</span> &gt; <span className="ph uicontrol">New</span> &gt; <span className="ph uicontrol">Test Object</span> from the main menu.</div><div className="itemgroup info"><div className="note tip note_tip"><span className="note__title">Tip:</span> <ul className="ul"><li className="li"><p className="p">For better management, you can also create a new folder by selecting <span className="ph uicontrol">Test Suites</span> &gt; <span className="ph uicontrol">New</span> &gt; <span className="ph uicontrol">Folder</span>, then create new test suites inside that folder.</p></li></ul></div></div></li><li className="li step stepexpand"><span className="ph cmd">Name the object as <code className="ph codeph">book_app</code>.</span></li><li className="li step stepexpand"><span className="ph cmd">In the <span className="ph uicontrol">Object's Properties</span> section, click <span className="ph uicontrol">Add</span>. The <span className="ph uicontrol">Add Property</span> dialog opens. Fill in the following information:</span><div className="itemgroup info"><img className="image" width={500} src={useBaseUrl("/c9ff9bb0-750d-11ed-a602-0242cfbc79b5.png")} /></div><div className="itemgroup info"><ul className="ul"><li className="li"><p className="p">Name: apptitle</p></li><li className="li"><p className="p">Match condition: equal</p></li><li className="li"><p className="p">Value: BOOKS</p></li></ul></div></li><li className="li step stepexpand"><span className="ph cmd">Click <span className="ph uicontrol">OK</span>. The <code className="ph codeph">apptitle</code> property appears in the <span className="ph uicontrol">Object's Properties</span> section.</span></li><li className="li step stepexpand"><span className="ph cmd">Check the <span className="ph uicontrol">Detect object by?</span> box in the <code className="ph codeph">apptitle</code> property line to generate a <span className="ph uicontrol">Selected Locator</span> for the object.</span><div className="itemgroup info"><img className="image" width={700} src={useBaseUrl("/cb10e4a0-750d-11ed-a602-0242cfbc79b5.png")} /></div></li></ol> 

### <a id="task-14e8e742" class="anchor_top_offset"/>Create the child object

<ol xmlns="http://www.w3.org/1999/xhtml" className="ol steps"><li className="li step stepexpand"><span className="ph cmd">In the <span className="ph uicontrol">Tests Explorer</span> panel, right-click on the&nbsp;<span className="ph uicontrol">Object Repository</span>&nbsp;folder, then select&nbsp;<span className="ph uicontrol">New</span> &gt; <span className="ph uicontrol">Test Object</span>.</span><div className="itemgroup info"><img className="image" width={500} src={useBaseUrl("/4569c860-9b67-11ec-ad3c-024208599ecc.png")} alt="Create a new test object" /></div><div className="itemgroup info">Alternatively, you can also go to <span className="ph uicontrol">File</span> &gt; <span className="ph uicontrol">New</span> &gt; <span className="ph uicontrol">Test Object</span> from the main menu.</div><div className="itemgroup info"><div className="note tip note_tip"><span className="note__title">Tip:</span> <ul className="ul"><li className="li"><p className="p">For better management, you can also create a new folder by selecting <span className="ph uicontrol">Test Suites</span> &gt; <span className="ph uicontrol">New</span> &gt; <span className="ph uicontrol">Folder</span>, then create new test suites inside that folder.</p></li></ul></div></div></li><li className="li step stepexpand"><span className="ph cmd">Name the object as <code className="ph codeph">input</code>.</span></li><li className="li step stepexpand"><span className="ph cmd">In the <span className="ph uicontrol">Object's Properties</span> section, click <span className="ph uicontrol">Add</span>. The <span className="ph uicontrol">Add Property</span> dialog opens. Fill in the following information:</span><div className="itemgroup info"><img className="image" width={500} src={useBaseUrl("/cbf7e940-750d-11ed-a602-0242cfbc79b5.png")} /></div><div className="itemgroup info"><ul className="ul"><li className="li"><p className="p">Name: id</p></li><li className="li"><p className="p">Match condition: equal</p></li><li className="li"><p className="p">Value: input</p></li></ul></div></li><li className="li step stepexpand"><span className="ph cmd">Click <span className="ph uicontrol">OK</span>. The <code className="ph codeph">input</code> property appears in the <span className="ph uicontrol">Object's Properties</span> section.</span></li><li className="li step stepexpand"><span className="ph cmd">Check the <span className="ph uicontrol">Detect object by?</span> box in the <code className="ph codeph">input</code> property line to generate a <span className="ph uicontrol">Selected Locator</span> for the object.</span><div className="itemgroup info"><img className="image" width={700} src={useBaseUrl("/ca8a4f80-750d-11ed-a602-0242cfbc79b5.png")} /></div></li><li className="li step stepexpand"><span className="ph cmd">After defining the property, in the <span className="ph uicontrol">Settings</span> section, choose the <span className="ph uicontrol">Shadow Root Parent</span> option, then click <span className="ph uicontrol">Browse</span>. The <span className="ph uicontrol">Object Repository Browser</span> dialog opens.</span><div className="itemgroup info"><img className="image" width={700} src={useBaseUrl("/c9be4cf0-750d-11ed-a602-0242cfbc79b5.png")} /></div></li><li className="li step stepexpand"><span className="ph cmd">In the open dialog, choose the <code className="ph codeph">book_app</code> object as the parent object. Click <span className="ph uicontrol">OK</span>.</span></li></ol> 
<section xmlns="http://www.w3.org/1999/xhtml" className="section result">The input object identifies <code className="ph codeph">book_app</code> as its <span className="ph uicontrol">Shadow Root Parent</span>. </section> 

## <a id="task-1104" class="anchor_top_offset"/>Create a test case with shadow DOM objects

<ol xmlns="http://www.w3.org/1999/xhtml" className="ol steps"><li className="li step stepexpand"><span className="ph cmd">From the main toolbar, click <span className="ph uicontrol">Create new Test Case</span>.</span><div className="itemgroup info">Or, in the <span className="ph uicontrol">Tests Explorer</span> panel, right-click the <span className="ph uicontrol">Test Case</span> folder then select <span className="ph uicontrol">New</span> &gt; <span className="ph uicontrol">Test Case</span>.</div><div className="itemgroup info"><img className="image" width={500} src={useBaseUrl("/7ecfa660-e2f7-11ec-a2dc-0242fe3e4a3f.png")} alt="Create new test case" /></div><div className="itemgroup info">Alternatively, you can also go to <span className="ph uicontrol">File</span> &gt; <span className="ph uicontrol">New</span> &gt; <span className="ph uicontrol">Test Case</span> from the main menu.</div><div className="itemgroup info"><div className="note tip note_tip"><span className="note__title">Tip:</span> <ul className="ul"><li className="li"><p className="p">For better management, you can also create a new folder by selecting <span className="ph uicontrol">Test Cases</span> &gt; <span className="ph uicontrol">New</span> &gt; <span className="ph uicontrol">Folder</span>, then create new test cases inside that folder.</p></li></ul></div></div></li><li className="li step stepexpand"><span className="ph cmd">In the new test case, switch to the <span className="ph uicontrol">Script</span> tab, copy and paste the following script into the test script.</span><div className="itemgroup info"><pre className="pre codeblock"><code>import static com.kms.katalon.core.testobject.ObjectRepository.findTestObject{"\n"}{"\n"}import com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI{"\n"}{"\n"}//Open browser and navigate to the AUT website{"\n"}WebUI.openBrowser('https://books-pwakit.appspot.com/explore?q='){"\n"}{"\n"}//Input text into the search bar{"\n"}WebUI.setText(findTestObject('Object Repository/input'), 'hello World'){"\n"}{"\n"}//Delay 5s to view the result{"\n"}WebUI.delay(5){"\n"}{"\n"}//Close the browser to clean up{"\n"}WebUI.closeBrowser(){"\n"}</code></pre>In <span className="ph uicontrol">Script</span> mode:<p className="p"><img className="image" width={600} src={useBaseUrl("/ca75dd20-750d-11ed-a602-0242cfbc79b5.png")} /></p>In <span className="ph uicontrol">Manual</span> mode:<p className="p"><img className="image" width={600} src={useBaseUrl("/cb739e10-750d-11ed-a602-0242cfbc79b5.png")} /></p></div></li><li className="li step stepexpand"><span className="ph cmd">Save and run the test case.</span><div className="itemgroup info"><div className="note note note_note"><span className="note__title">Note:</span> <ul className="ul"><li className="li">For <span className="ph">Katalon Studio</span> versions before 8.6.0, when testing with shadow DOM objects, you can reduce the default timeout period that <span className="ph">Katalon Studio</span> waits for the application under test to be loaded when executing the automation test. You can find this option in <span className="ph uicontrol">Project Settings</span> &gt; <span className="ph uicontrol">Execution</span> &gt; <span className="ph uicontrol">Default wait for element timeout (in seconds)</span>.<img className="image" width={700} src={useBaseUrl("/25a0e0a0-c153-11ed-a4d3-0242cfbc79b5.png")} /></li></ul></div></div></li></ol> 
<section xmlns="http://www.w3.org/1999/xhtml" className="section result"><span className="ph">Katalon Studio</span> successfully find the element within the shadow root and input the text: "hello World" into the search bar.</section> 

## <a id="task-137" class="anchor_top_offset"/>Work with shadow DOM elements

<section xmlns="http://www.w3.org/1999/xhtml" className="section context"><div className="note note note_note"><span className="note__title">Note:</span> <ul className="ul"><li className="li"><p className="p">From <span className="ph">Katalon Studio</span> version 8.6.0 onwards, you can test multi-level of nested shadow DOM using Record and Spy utility.</p></li></ul></div><p className="p">​To work with shadow DOM elements, follow these steps:</p></section> 
<ol xmlns="http://www.w3.org/1999/xhtml" className="ol steps"><li className="li step stepexpand"><span className="ph cmd">Use the <span className="ph uicontrol">Spy</span> utility to capture parent objects that contain shadow DOM elements.​</span></li><li className="li step stepexpand"><span className="ph cmd">Identify the properties of the shadow DOM element.</span></li><li className="li step stepexpand"><span className="ph cmd">Create a new object in <span className="ph">Katalon Studio</span> with properties defined accordingly.</span></li><li className="li step stepexpand"><span className="ph cmd">In the new object setting, select <span className="ph uicontrol">Shadow Root Parent​</span> option and define with the parent object from the first step.</span><div className="itemgroup info">This allows <span className="ph">Katalon Studio</span> to traverse through parent objects via generated CSS selector to detect shadow DOM objects by their properties. See <a className="xref" href="/docs/create-tests/test-objects/web-test-objects/manage-web-test-objects-in-katalon-studio#task-9958">Create an object's locator</a>.<img className="image" width={700} src={useBaseUrl("/37da58c0-5ec8-11ed-a602-0242cfbc79b5.png")} /></div><div className="itemgroup stepxmp">For example, the following test execution log shows that <span className="ph">Katalon Studio</span>  finds the parent object first. Once the parent object was found, <span className="ph">Katalon Studio</span>   finds the shadow DOM element by CSS selector.<img className="image" width={700} src={useBaseUrl("/37fbc370-5ec8-11ed-a602-0242cfbc79b5.png")} /></div></li></ol> 

### <a id="id_13" class="anchor_top_offset"/>Limitations

<ul xmlns="http://www.w3.org/1999/xhtml" className="ul"><li className="li"><span className="ph">Katalon Studio</span> does not support recording the click action on test objects with the shadow DOM button object type. Some elements on shadow DOM cannot be detected by Selenium 3, so they might be unclickable. The workaround for this issue is to manually replace the Click keyword with the Enhanced Click keyword. See <a className="xref" href="/docs/create-tests/keywords/keyword-description-in-katalon-studio/web-ui-keywords/webui-enhanced-click">[WebUI] Enhanced Click</a>.</li><li className="li">When using Record and Spy utilities, you cannot take screenshots of shadow DOM test objects. <span className="ph">Katalon Studio</span> does not support the XPath and Screenshot locator strategies for shadow DOM test objects. We recommend using the CSS locator strategy only.</li></ul> 

## <a id="id_14" class="anchor_top_offset"/>Modify object properties at runtime

<p xmlns="http://www.w3.org/1999/xhtml" className="p">If you have multiple and similar objects you want to quickly interact with during test execution, and you really don't want to spend time writing duplicate steps to interact with them, the approach below will help you reduce the time and maintain cleaner codes.</p> 
<p xmlns="http://www.w3.org/1999/xhtml" className="p">Use CSS or XPath to locate your elements, and then you start changing the IDs. For example:</p> 
<pre xmlns="http://www.w3.org/1999/xhtml" className="pre codeblock"><code>TestObject yourObject = WebUI.modifyObjectProperty(findTestObject('Object Repository/Some object'), 'css', 'equals', '#${"{"}i{"}"}', true){"\n"}</code></pre> 
<p xmlns="http://www.w3.org/1999/xhtml" className="p">where 'i' is the loop counter. You can put it all inside of a loop that will read your excel sheet:</p> 
<pre xmlns="http://www.w3.org/1999/xhtml" className="pre codeblock"><code>for (def i=0; i &lt;= fineTestData('Path to your excel').getRowNumbers(); i++) {"{"}{"}"}{"\n"}{"\n"}</code></pre> 
<pre xmlns="http://www.w3.org/1999/xhtml" className="pre codeblock"><code>https://www.katalon.com/resources-center/tutorials/data-driven-testing/ for linking data with test.{"\n"}</code></pre> 
<p xmlns="http://www.w3.org/1999/xhtml" className="p"><em className="ph i">Credit to <a className="xref j-external-link" href="https://forum.katalon.com/discussion/7010/how-to-test-clicking-multiple-objects-without-starting-over#lComment_16209" target="_blank">Mate Mrse</a> </em></p> 
